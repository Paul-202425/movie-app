{"ast":null,"code":"// frontend/src/components/MovieModal.jsx\nimport React,{useEffect,useState}from'react';import'./MovieModal.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function MovieModal(_ref){let{movie,onClose,isFavorite,toggleFavorite,setRating,rating}=_ref;const[trailerUrl,setTrailerUrl]=useState('');const[loadingTrailer,setLoadingTrailer]=useState(false);useEffect(()=>{const fetchTrailer=async()=>{if(!(movie!==null&&movie!==void 0&&movie.id))return;setLoadingTrailer(true);try{var _data$trailer;const res=await fetch(`/api/trailer/${movie.id}`);const data=await res.json();const key=(data===null||data===void 0?void 0:(_data$trailer=data.trailer)===null||_data$trailer===void 0?void 0:_data$trailer.key)||null;setTrailerUrl(key?`https://www.youtube.com/embed/${key}`:'');}catch(err){console.error('Error fetching trailer:',err);setTrailerUrl('');}finally{setLoadingTrailer(false);}};fetchTrailer();},[movie===null||movie===void 0?void 0:movie.id]);if(!movie)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content dark\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:onClose,\"aria-label\":\"Close\",children:\"\\u2716\"}),/*#__PURE__*/_jsx(\"h2\",{children:movie.title}),/*#__PURE__*/_jsx(\"p\",{children:movie.overview}),loadingTrailer?/*#__PURE__*/_jsx(\"p\",{className:\"no-trailer\",style:{opacity:0.8},children:\"Loading trailer\\u2026\"}):trailerUrl?/*#__PURE__*/_jsx(\"iframe\",{title:\"YouTube trailer\",width:\"100%\",height:\"360\",src:trailerUrl,frameBorder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true,style:{borderRadius:'12px'}}):/*#__PURE__*/_jsx(\"p\",{className:\"no-trailer\",children:\"Trailer not available\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"favorite-button\",onClick:()=>toggleFavorite(movie),children:isFavorite?'★ Remove from Favorites':'☆ Add to Favorites'}),/*#__PURE__*/_jsxs(\"div\",{className:\"rating-section\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Rate this movie:\"}),[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"span\",{className:`star ${rating>=star?'selected':''}`,onClick:()=>setRating(movie.id,star),role:\"button\",\"aria-label\":`Rate ${star} star${star>1?'s':''}`,children:\"\\u2605\"},star)),/*#__PURE__*/_jsxs(\"p\",{className:\"rating-value\",children:[rating,\"/5\"]})]})]})]})});}export default MovieModal;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","MovieModal","_ref","movie","onClose","isFavorite","toggleFavorite","setRating","rating","trailerUrl","setTrailerUrl","loadingTrailer","setLoadingTrailer","fetchTrailer","id","_data$trailer","res","fetch","data","json","key","trailer","err","console","error","className","children","onClick","title","overview","style","opacity","width","height","src","frameBorder","allow","allowFullScreen","borderRadius","map","star","role"],"sources":["C:/Users/paulm/OneDrive/Desktop/MovieApp/movie-app/frontend/src/components/MovieModal.jsx"],"sourcesContent":["// frontend/src/components/MovieModal.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport './MovieModal.css';\r\n\r\nfunction MovieModal({ movie, onClose, isFavorite, toggleFavorite, setRating, rating }) {\r\n  const [trailerUrl, setTrailerUrl] = useState('');\r\n  const [loadingTrailer, setLoadingTrailer] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchTrailer = async () => {\r\n      if (!movie?.id) return;\r\n      setLoadingTrailer(true);\r\n      try {\r\n        const res = await fetch(`/api/trailer/${movie.id}`);\r\n        const data = await res.json();\r\n        const key = data?.trailer?.key || null;\r\n        setTrailerUrl(key ? `https://www.youtube.com/embed/${key}` : '');\r\n      } catch (err) {\r\n        console.error('Error fetching trailer:', err);\r\n        setTrailerUrl('');\r\n      } finally {\r\n        setLoadingTrailer(false);\r\n      }\r\n    };\r\n    fetchTrailer();\r\n  }, [movie?.id]);\r\n\r\n  if (!movie) return null;\r\n\r\n  return (\r\n    <div className=\"modal-overlay\">\r\n      <div className=\"modal-content dark\">\r\n        <button className=\"close-button\" onClick={onClose} aria-label=\"Close\">✖</button>\r\n\r\n        <h2>{movie.title}</h2>\r\n        <p>{movie.overview}</p>\r\n\r\n        {loadingTrailer ? (\r\n          <p className=\"no-trailer\" style={{ opacity: 0.8 }}>Loading trailer…</p>\r\n        ) : trailerUrl ? (\r\n          <iframe\r\n            title=\"YouTube trailer\"\r\n            width=\"100%\"\r\n            height=\"360\"\r\n            src={trailerUrl}\r\n            frameBorder=\"0\"\r\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n            allowFullScreen\r\n            style={{ borderRadius: '12px' }}\r\n          />\r\n        ) : (\r\n          <p className=\"no-trailer\">Trailer not available</p>\r\n        )}\r\n\r\n        <div className=\"modal-actions\">\r\n          <button className=\"favorite-button\" onClick={() => toggleFavorite(movie)}>\r\n            {isFavorite ? '★ Remove from Favorites' : '☆ Add to Favorites'}\r\n          </button>\r\n\r\n          <div className=\"rating-section\">\r\n            <p>Rate this movie:</p>\r\n            {[1, 2, 3, 4, 5].map((star) => (\r\n              <span\r\n                key={star}\r\n                className={`star ${rating >= star ? 'selected' : ''}`}\r\n                onClick={() => setRating(movie.id, star)}\r\n                role=\"button\"\r\n                aria-label={`Rate ${star} star${star > 1 ? 's' : ''}`}\r\n              >\r\n                ★\r\n              </span>\r\n            ))}\r\n            <p className=\"rating-value\">{rating}/5</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MovieModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}